import os
import pydicom
import matplotlib.pyplot as plt

# Step 1: Automatically find the folder containing DICOMs
dicom_files = []
for root, _, files in os.walk('/kaggle/input'):
    for f in files:
        if f.lower().endswith(('.dcm', '.dicom')):
            dicom_files.append(os.path.join(root, f))

# Step 2: Check if any files found
if len(dicom_files) == 0:
    print("No DICOM files found in /kaggle/input. Check your dataset structure.")
else:
    print(f" Found {len(dicom_files)} DICOM files.")
    print("Example file path:", dicom_files[0])

    # Step 3: Visualize first two DICOMs with metadata
    for i in range(min(2, len(dicom_files))):
        dicom_path = dicom_files[i]
        dicom_data = pydicom.dcmread(dicom_path)
        image = dicom_data.pixel_array

        # Normalize for better visualization
        image = (image - image.min()) / (image.max() - image.min())
        # Display image
        plt.figure(figsize=(8,8))
        plt.imshow(image, cmap='gray')
        plt.title(f"VinDr-CXR Sample {i+1}\n{dicom_data.get('ViewPosition', 'Unknown View')}")
        plt.axis('off')
        plt.show()